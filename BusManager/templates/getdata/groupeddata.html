{% extends 'bs_layout.html' %}
{% block content %}
<a class="btn btn-secondary" href="{{url_for('admin.admin_home')}}">Back to Homepage</a>
<h1 class='display-1'>Grouped Data</h1>
<hr>
<h3 class="px-4">Timings:  <span class="mx-3"><span class="btn btn-dark">8:30AM</span> to <span class="btn btn-dark">3:30PM</span> </h3>

<h3 class="px-4">Location: <span class="mx-1"></span><span class="btn btn-primary">{{location}}</span></h3>

<hr>
<div class="flex">
	<h1 class='display-3'>Students</h1>
	<input
	type="text" 
	id="studsearch" 
	class="form-control bg-dark text-light" 
	placeholder="Search Student Phone" 
	onkeyup="tableFilterer(3, targetTableID='stbl', searchSource='studsearch')">
</div>

<div class="box">
	<table class="table table-striped table-dark" id="stbl">
	<thead>
		<tr>
		<th scope="col">SerialNo</th>
		<th scope="col">Student Name</th>
		<th scope="col">Student ID</th>
		<th scope="col">Phone</th>
		<th scope="col">View Profile</th>
		</tr>
	</thead>
	<tbody id='tbdy'>

		{% for e in students %}
		<tr data-id="SX">
		<td>{{loop.index}}</td>
			<td>{{e.name}}</td>
			<td>{{e.student_id}}</td>
			<td class='phn'>{{e.phone}}</td>
			<td><button class="btn btn-success" onclick=ViewProfile({{e.id}})>View Profile</button></td>
		</tr>
		{% endfor %}

	</tbody>
	</table>
</div>

{% endblock content %}

{% block styles %}
<style>
.box{
	width: 98%;
	margin: auto;
	height: 300px;
	background-color: black;
	overflow-y:auto;
	border: 1px solid white;
}

.flex{
	display: flex;
}

#studsearch, #drivsearch{
	height: 50px;
	margin: auto 20px;
}
</style>
{% endblock styles %}

{% block javascript %}
<script>
const ViewProfile = (id) => {
	window.location.href = `${window.location.origin}/admin/studentprofile/${id}`;
}
</script>

{% endblock javascript %}